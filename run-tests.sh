#!/bin/bash
set -e

# カスタムテストランナースクリプト
# go-webpライブラリのテストを除外し、メインコードのみをテスト

echo "カスタムテストを実行中..."

# まず、プロジェクト内のソースファイルだけをテスト
echo "プロジェクトコードのテスト..."
go test -v ./...

# このプロジェクト以下にあるパッケージのみをテスト
# 依存関係のテストは実行しない
if [ -d "pkg" ]; then
  echo "パッケージのテスト..."
  go test -v ./pkg/...
fi

echo "テスト完了"
